 # 实验一 MySQL的安装和使用

 我的基本操作环境是使用Xshell软件进行远程操作阿里云服务器，该服务器安装的是Ubuntu操作系统。下载Docker并管理实验所需要的环境。

## Part1：使用Docker安装下载MySql
 * 使用Docker从中央仓库下载mysql镜像
 	> docker pull mysql
 * 拉取成功后可以查看镜像
	> docker images
 * 创建一个mysql容器
	> docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 --name mysqlserver mysql
 * 查看当前运行的容器
	> docker ps
 * 进入容器即可对mysql进行操作
	> docker exec -it  mysqlserver /bin/bash
 * 使用mysql
	> mysql -h localhost -u root -p 
 * 使得mysql可以远程访问
	```sql
	#修改加密mysql规则
	ALTER USER 'root'@'%' IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;
	#更新远程访问用户密码
	ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';
	#刷新权限
	FLUSH PRIVILEGES;
	```
 ## Part2：MySql的基本操作
 ### Step1：创建一个数据库
 1. mysql系统自带四个数据库
	> information_schema：主要存储了系统中的一些数据库对象信息。比如用户表信息、列信息、权限信息、字符集信息、分区信息等。
	>
	> performance_schema：用于监控MySQL Server在一个较低级别的运行过程中的资源消耗、资源等待等情况。
	>
	> mysql：存储了系统的用户权限信息。
	>
	>sys：多为performance_schema的视图，更加方便了解数据库运行情况
 2. 数据库操作语法（实验部分）
	 ```sql
	 #创建一个名为school的数据库
	 create database school;
	 #展示数据库
	 show databases;
	 #使用数据库school;会显示“database changed”提示
	 use school;	
	 #若要删除数据库
	 drop database school;
	 ```

 ### Step2：创建一个学生表和一张学生信息表
 1. 在school数据库中创建一张学生表和一张学生信息表
	```sql
	#创建一张学生表名为student
	create table student(
	  `id`  int(11),
	  `name`  varchar(20),
	  `age` int(11)
	)default charset='utf8';

	#创建一张学生信息表studentInfo
	create table studentInfo(
	  `id`  int(11),
	  `city`  varchar(20),
	  `love`  varchar(50),
	  `grade`  float(10)	 
	)default charset='utf8';
	```
 2. 表结构的其他操作
	```sql
	#查询数据库中所有数据表
	show tables;
	#查看具体数据表的详情信息
	show create table 表名;
	#查看表的具体字段信息
	desc 表名;
	#删除数据表
	drop table 表名；
	```

 ### Step3：增加信息
 1. 单条信息插入
	```sql
	#为学生表插入一个学生
	insert into student (id,name,age)values(20200001,"王二小",18);
	#若所有字段均插入信息，则可简写
	insert into student values(20200002,"marry",16);
	#所插入信息符合表规则下可以不全，则未填写的字段为NULL;
	insert into student (id,name)values(20200003,"jack");
	```
 2. 一次插入多条数据
	```sql
	#为学生信息表插入多条数据
	insert into studentInfo (id,city,love,grade)values(20200001,"chengdu","baskeball",98.50),(20200002,"xian","swimming",80.98),(20200003,"changsha","run",90.00);
	```
 3. 赋值式插入信息
	```sql
	#为student表插入信息,支持部分信息不赋值
	insert into student set id=20200004, name="baby", age=17;
	```

 ### Step4：查询信息
 1. 基本查询
	```sql
	#查询一张表的所有信息
	select * from 表名;
	#查询某个字段或多个字段
	select id,love from studentInfo;
	```
 2. 条件查询
	```sql
	#使用where关键字来限制条件
	#查询学生表中id为20200004的学生信息
	select * from student where id=20200004;
	#双表查询
	#查询student表和studentInfo表中均id=20200002的信息
	select * from student,studentInfo where student.id=20200002 and student.id=studentInfo.id;
	#在上一条语句基础上，使得展示指定字段
	select student.id,name,love from student,studentInfo where student.id=20200002 and student.id=studentInfo.id;
	```
 3. 根据某字段排序
	```sql
	#asc表示升序，默认升序；desc表示降序
	#studentInfo表中按照grade排序
	select * from studentInfo order by grade;
	select * from studentInfo order by grade desc;
	```
 4. 模糊查询
	```sql
	#like关键字是模糊查询的关键；%匹配任意0个以上字符；_匹配任意一个字符
	#查询student表中id中包含2020的所有数据
	select * from student where id like '%2020%';
	```

 ### Step5：修改信息
 1. 单表更新
	```sql
	#更新一个字段或多个字段
	update student set age=20,name='沈腾' where id=20200001;
	#如果不设置where条件限制，则该字段的所有元组均修改
	update student set age=20;
	#mysql支持数学表达式运算
	update student set age=age+1 where id=20200001;
	#数学表达式是从左到右进行运算
	update student set age=age/2,age=age+1 where id=20200001;
	```
 2. 多表更新
	```sql
	#更新学号为20200001的student和studentInfo内容
	update student,studentInfo set age=18,grade=96.9 where student.id=20200001 and student.id=studentInfo.id;
	```

 ### Step6: 删除信息
 ```sql
 #删除一行数据
 delete from student where id=20200002;
 #删除所有行
 delete from student;
 #删除一列数据
 alter table student drop column age; 
 #添加列字段
 alter table student add column age int(11);
 #删除表
 drop table student;
 #清空表
 truncate table student;
 ```

 ## 遇到的问题：
 1. MySql数据库创建表时字段名称无论用单引号还是双引号均报错
 	> 解决：字段应该使用反单引号包裹；而在mysql中字段的值使用引号包裹。
 2. 进入Docker容器内，无法输入中文字符
	> 原因：Docker容器系统所支持的字符集是POSIX字符集，此字符集不支持中文。
	>
	> 解决：进入Docker容器时设置系统的字符集为C.UTF-8;
	>-  docket exec -it 容器id env LANG=C.UTF-8 bash;


 ## TODO：

 	- 
 	- 

 # 实验二

xxx